{% extends "base.html" %}

{% block title %}Programs - SSIS{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold">Academic Programs</h2>
    <a href="{{ url_for('program.add') }}" class="btn btn-success">
        ‚ûï Add New Program
    </a>
</div>

<div class="row mb-3">
    <div class="col-md-6">
        <form method="GET" class="d-flex">
            <input type="text" name="search" class="form-control me-2" 
                   placeholder="Search by code or name..." 
                   value="{{ search }}">
            <button type="submit" class="btn btn-primary">Search</button>
            {% if search %}
            <a href="{{ url_for('program.index') }}" class="btn btn-secondary ms-2">Clear</a>
            {% endif %}
        </form>
    </div>
</div>

<div class="table-responsive">
    <table class="table table-hover table-striped">
        <thead class="table-dark">
            <tr>
                <th>Program Code</th>
                <th>Program Name</th>
                <th>College</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% if programs %}
                {% for program in programs %}
                <tr>
                    <td><span class="badge bg-primary">{{ program[0] }}</span></td>
                    <td>{{ program[1] }}</td>
                    <td>{{ program[3] if program[3] else program[2] }}</td>
                    <td>
                        <a href="{{ url_for('program.edit', code=program[0]) }}" 
                           class="btn btn-sm btn-warning">‚úèÔ∏è Edit</a>
                        <a href="{{ url_for('program.delete', code=program[0]) }}" 
                           class="btn btn-sm btn-danger" 
                           onclick="return confirm('Are you sure you want to delete this program? This will affect students enrolled in this program.')">
                           üóëÔ∏è Delete
                        </a>
                    </td>
                </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="4" class="text-center text-muted">
                        No programs found. {% if search %}Try a different search.{% else %}Add your first program!{% endif %}
                    </td>
                </tr>
            {% endif %}
        </tbody>
    </table>
</div>
{% endblock %}